
<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fetch Vehicle Details</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
  <h1>Fetch Vehicle Details</h1>
    <form id="fetchVehicleForm">
        <label for="registration_number">Enter Registration Number:</label>
        <input type="text" id="registration_number" name="registration_number">
        <button type="submit">Fetch Details</button>
    </form>

    <div id="vehicleDetails"></div>
<ul>
    <script>
        $(document).ready(function () {
            $('#fetchVehicleForm').submit(function (event) {
                event.preventDefault();
                var registrationNumber = $('#registration_number').val();
                $.ajax({
                    url: '/fetch_vehicle_details',
                    type: 'GET',
                    data: {registration_number: registrationNumber},
                    success: function (data) {
                        $('#vehicleDetails').html('<h2>Vehicle Details</h2>' +
                            '<p><strong>Name:</strong> ' + data.name + '</p>' +
                            '<p><strong>Phone Number:</strong> ' + data.phone_no + '</p>' +
                            '<p><strong>Address:</strong> ' + data.address + '</p>' +
                            '<p><strong>Registration Number:</strong> ' + data.registration_no + '</p>');
                        // Trigger Twilio SMS API call
                        var formData = {
                            registration_number: registrationNumber,
                            phone_number: data.phone_no, // Use phone number from vehicle details
                            message: 'Vehicle details: ' + data.name+ ', Kindly wear your helmet while Riding'
                        };
                        $.ajax({
                            url: '/send_sms',
                            type: 'POST',
                            data: formData,
                            success: function (response) {
                                console.log('SMS sent successfully!');
                            },
                            error: function (xhr, status, error) {
                                console.error('Error sending SMS:', error);
                            }
                        });
                    },
                    error: function (xhr, status, error) {
                        $('#vehicleDetails').html('<p>Error: ' + xhr.responseJSON.error + '</p>');
                    }
                });
            });
        });
    </script> -->
    <!-- </ul>
    <div class="user-settings">


        
            <li><a href="/login">LOG-OUT</a></li>
             <li><a href="/">BACK</a></li> -->
        
    

<!-- </body> -->
<!-- </html>  -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fetch Vehicle Details</title>
    <!-- Add custom CSS styles -->
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #cccccc;
        }
        .container {
            max-width: 600px;
            margin: 20px auto;
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        h1 {
            text-align: center;
            margin-bottom: 20px;
        }
        form {
            text-align: center;
        }
        input[type="text"] {
            width: 70%;
            padding: 10px;
            margin-right: 10px;
            border-radius: 4px;
            border: 1px solid #ccc;
            box-sizing: border-box;
        }
        button[type="submit"], button[type="button"] {
            padding: 10px 20px;
            border: none;
            background-color: #eaebed;
            color: #000000;
            border-radius: 4px;
            cursor: pointer;
        }
        #vehicleDetails {
            margin-top: 20px;
        }
    </style>
    <!-- Include jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
<div class="container">
    <h1>Fetch Vehicle Details</h1>
    <form id="fetchVehicleForm">
        <label for="registration_number">Enter Registration Number:</label>
        <input type="text" id="registration_number" name="registration_number">
        <button type="submit">Fetch Details</button>
    </form>

    <div id="vehicleDetails"></div>

    <!-- Back button -->
    <button type="button" onclick="window.history.back()">Back</button>
</div>


<script>
    $(document).ready(function () {
        $('#fetchVehicleForm').submit(function (event) {
            event.preventDefault();
            var registrationNumber = $('#registration_number').val();
            $.ajax({
                url: '/fetch_vehicle_details',
                type: 'GET',
                data: {registration_number: registrationNumber},
                success: function (data) {
                    $('#vehicleDetails').html('<h2>Vehicle Details</h2>' +
                        '<p><strong>Name:</strong> ' + data.name + '</p>' +
                        '<p><strong>Phone Number:</strong> ' + data.phone_no + '</p>' +
                        '<p><strong>Address:</strong> ' + data.address + '</p>' +
                        '<p><strong>Registration Number:</strong> ' + data.registration_no + '</p>');
                    // Trigger Twilio SMS API call
                    var formData = {
                        registration_number: registrationNumber,
                        phone_number: data.phone_no, // Use phone number from vehicle details
                        message: 'Vehicle details: ' + data.name+ ', Kindly wear your helmet while Riding'
                    };
                    $.ajax({
                        url: '/send_sms',
                        type: 'POST',
                        data: formData,
                        success: function (response) {
                            console.log('SMS sent successfully!');
                        },
                        error: function (xhr, status, error) {
                            console.error('Error sending SMS:', error);
                        }
                    });
                },
                error: function (xhr, status, error) {
                    $('#vehicleDetails').html('<p>Error: ' + xhr.responseJSON.error + '</p>');
                }
            });
        });
    });
</script>

<ul>
    <li><a href="/fetch">fetch</a></li>
</ul>

</body>
</html>
